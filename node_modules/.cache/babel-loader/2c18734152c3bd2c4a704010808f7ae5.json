{"ast":null,"code":"var _jsxFileName = \"/home/codaruuu/Desktop/reactClient/remixclient/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport Web3 from \"web3\";\nimport { ContractABI } from \"./ContractABI\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst web3 = new Web3(new Web3.providers.HttpProvider(\"HTTP://127.0.0.1:7545\"));\nweb3.eth.defaultAccount = web3.eth.accounts[0];\nvar RemixContract = new web3.eth.Contract(ContractABI, \"\");\nvar prize = 0;\n\nfunction App() {\n  _s();\n\n  const [searchContract, setSearchContract] = useState(\"\");\n  const [participant, setParticipants] = useState(\"\");\n  const [currContract, setCurrContract] = useState(\"\");\n  const [createPrize, setCreatePrize] = useState(\"\");\n  const [enterEmail, setEnterEmail] = useState(\"\");\n  const [isActive, setIsActive] = useState(\"\");\n  const [localContracts, setLocalContracts] = useState(JSON.parse(localStorage.getItem(\"giveawayAdresses\")).map(idx => /*#__PURE__*/_jsxDEV(\"li\", {\n    children: idx\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 123\n  }, this)));\n\n  const getContract = async e => {\n    e.preventDefault();\n    setCurrContract(searchContract);\n    RemixContract = new web3.eth.Contract(ContractABI, searchContract);\n    var participants = await RemixContract.methods.getParticipantsAccn().call();\n    prize = await RemixContract.methods.getPrize().call();\n    setParticipants(participants.map(idx => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: idx\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 47\n    }, this)));\n  };\n\n  const getParticipants = async e => {\n    var participants = await RemixContract.methods.getParticipantsAccn().call();\n    setParticipants(participants.map(idx => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: idx\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 47\n    }, this)));\n  };\n\n  const register = async e => {\n    e.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await RemixContract.methods.enter(enterEmail).estimateGas();\n    const result = await RemixContract.methods.enter(enterEmail).send({\n      from: account,\n      gas\n    });\n    console.log(result);\n  };\n\n  const createGiveaway = async e => {\n    e.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const data = '0x' + '608060405234801561001057600080fd5b50604051610e3a380380610e3a83398101806040528101908080518201929190505050336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600290805190602001906100899291906100b3565b5060006001819055506001600360006101000a81548160ff02191690831515021790555050610158565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100f457805160ff1916838001178555610122565b82800160010185558215610122579182015b82811115610121578251825591602001919060010190610106565b5b50905061012f9190610133565b5090565b61015591905b80821115610151576000816000905550600101610139565b5090565b90565b610cd3806101676000396000f300608060405260043610610099576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806305b9415d1461009e57806322f3e2d4146100f557806335c1d349146101245780634d98cd06146101fd5780635d495aea1461028d5780635d6ecae6146102e45780638da5cb5b146103505780639d4ff8ad146103a7578063c34f6b0d14610410575b600080fd5b3480156100aa57600080fd5b506100b36104a0565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561010157600080fd5b5061010a6104ee565b604051808215151515815260200191505060405180910390f35b34801561013057600080fd5b5061014f60048036038101908080359060200190929190505050610505565b604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001828103825283818151815260200191508051906020019080838360005b838110156101c15780820151818401526020810190506101a6565b50505050905090810190601f1680156101ee5780820380516001836020036101000a031916815260200191505b50935050505060405180910390f35b34801561020957600080fd5b506102126105f0565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610252578082015181840152602081019050610237565b50505050905090810190601f16801561027f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561029957600080fd5b506102a26106b7565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156102f057600080fd5b506102f9610864565b6040518080602001828103825283818151815260200191508051906020019060200280838360005b8381101561033c578082015181840152602081019050610321565b505050509050019250505060405180910390f35b34801561035c57600080fd5b5061036561094d565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156103b357600080fd5b5061040e600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050610972565b005b34801561041c57600080fd5b50610425610a44565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561046557808201518184015260208101905061044a565b50505050905090810190601f1680156104925780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6000801515600360009054906101000a900460ff1615151415156104c357600080fd5b600560000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6000600360009054906101000a900460ff16905090565b60048181548110151561051457fe5b90600052602060002090600202016000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806001018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156105e65780601f106105bb576101008083540402835291602001916105e6565b820191906000526020600020905b8154815290600101906020018083116105c957829003601f168201915b5050505050905082565b606060001515600360009054906101000a900460ff16151514151561061457600080fd5b60056001018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156106ad5780601f10610682576101008083540402835291602001916106ad565b820191906000526020600020905b81548152906001019060200180831161069057829003601f168201915b5050505050905090565b6000806000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561071557600080fd5b60011515600360009054906101000a900460ff16151514151561073757600080fd5b600480549050610745610ae6565b81151561074e57fe5b0690506000600360006101000a81548160ff02191690831515021790555060048181548110151561077b57fe5b906000526020600020906002020160056000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060018201816001019080546001816001161561010002031660029004610819929190610b7b565b5090505060048181548110151561082c57fe5b906000526020600020906002020160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1691505090565b606080600060048054905060405190808252806020026020018201604052801561089d5781602001602082028038833980820191505090505b509150600090505b600154811015610945576004818154811015156108be57fe5b906000526020600020906002020160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1682828151811015156108fe57fe5b9060200190602002019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508060010190506108a5565b819250505090565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600460408051908101604052803373ffffffffffffffffffffffffffffffffffffffff168152602001838152509080600181540180825580915050906001820390600052602060002090600202016000909192909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001019080519060200190610a2d929190610c02565b505050506001806000828254019250508190555050565b606060028054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610adc5780601f10610ab157610100808354040283529160200191610adc565b820191906000526020600020905b815481529060010190602001808311610abf57829003601f168201915b5050505050905090565b6000444260405160200180838152602001828152602001925050506040516020818303038152906040526040518082805190602001908083835b602083101515610b455780518252602082019150602081019050602083039250610b20565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060019004905090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610bb45780548555610bf1565b82800160010185558215610bf157600052602060002091601f016020900482015b82811115610bf0578254825591600101919060010190610bd5565b5b509050610bfe9190610c82565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610c4357805160ff1916838001178555610c71565b82800160010185558215610c71579182015b82811115610c70578251825591602001919060010190610c55565b5b509050610c7e9190610c82565b5090565b610ca491905b80821115610ca0576000816000905550600101610c88565b5090565b905600a165627a7a723058203300d67cbe2c462139dbcfb7e3b22602bbfe587d7234154bc5e7e8e7c14367110029'; // Deploy\n\n    const Contract = new web3.eth.Contract(ContractABI);\n    Contract.deploy({\n      data,\n      arguments: [createPrize]\n    }).send({\n      from: account,\n      gas: 4700000\n    }).on('error', function (error) {\n      console.log('error: ', error);\n    }).then(function (newContract) {\n      const address = newContract.options.address;\n      var alreadyStored = JSON.parse(localStorage.getItem(\"giveawayAdresses\"));\n\n      if (alreadyStored) {\n        alreadyStored.push(address);\n      } else {\n        alreadyStored = [];\n      }\n\n      localStorage.setItem(\"giveawayAdresses\", JSON.stringify(alreadyStored));\n      setLocalContracts(alreadyStored.map(idx => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: idx\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 54\n      }, this)));\n      console.log('address:', address);\n    });\n  };\n\n  const pickWinner = async e => {\n    e.preventDefault();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"splitScreen\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"topPane\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Cauta contract\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: getContract,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                placeHolder: \"adresa contract\",\n                type: \"text\",\n                name: \"message\",\n                value: searchContract,\n                onChange: e => setSearchContract(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"submit\",\n              value: \"Cauta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\" \", currContract, \"  \", /*#__PURE__*/_jsxDEV(\"u\", {\n              children: \" :premiul este: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 35\n            }, this), \"  \", prize, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"secondTopPane\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Informatii contract\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: register,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                placeHolder: \"email\",\n                className: \"smallBox\",\n                type: \"text\",\n                name: \"enterEmail\",\n                value: enterEmail,\n                onChange: e => setEnterEmail(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"submit\",\n              value: \"Inscriere\",\n              className: \"smallBox\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: getParticipants,\n            type: \"button\",\n            children: \" Arata participantii \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: pickWinner,\n            type: \"button\",\n            children: \"Alege castigator\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [\" \", participant, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bottomPane\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Creaza giveaway\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: createGiveaway,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                placeHolder: \"premiu ...\",\n                type: \"text\",\n                name: \"message\",\n                value: createPrize,\n                onChange: e => setCreatePrize(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"submit\",\n              value: \"Creaza\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), localContracts]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"7XqzHOyB0gLkI3La2DOo4gUQwn4=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/codaruuu/Desktop/reactClient/remixclient/src/App.js"],"names":["React","useState","Web3","ContractABI","web3","providers","HttpProvider","eth","defaultAccount","accounts","RemixContract","Contract","prize","App","searchContract","setSearchContract","participant","setParticipants","currContract","setCurrContract","createPrize","setCreatePrize","enterEmail","setEnterEmail","isActive","setIsActive","localContracts","setLocalContracts","JSON","parse","localStorage","getItem","map","idx","getContract","e","preventDefault","participants","methods","getParticipantsAccn","call","getPrize","getParticipants","register","window","ethereum","enable","account","gas","enter","estimateGas","result","send","from","console","log","createGiveaway","data","deploy","arguments","on","error","then","newContract","address","options","alreadyStored","push","setItem","stringify","pickWinner","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Web3 from \"web3\";\nimport { ContractABI } from \"./ContractABI\";\n\nimport \"./App.css\";\n\nconst web3 = new Web3(new Web3.providers.HttpProvider(\"HTTP://127.0.0.1:7545\"));\nweb3.eth.defaultAccount = web3.eth.accounts[0];\nvar RemixContract = new web3.eth.Contract(ContractABI, \"\");\nvar prize = 0;\n\n\nfunction App() {\n  const [searchContract, setSearchContract] = useState(\"\");\n  const [participant, setParticipants] = useState(\"\");\n  const [currContract, setCurrContract] = useState(\"\");\n  const [createPrize, setCreatePrize] = useState(\"\");\n  const [enterEmail, setEnterEmail ] = useState(\"\");\n  const [isActive, setIsActive ] = useState(\"\");\n  const [localContracts, setLocalContracts] = useState( JSON.parse(localStorage.getItem(\"giveawayAdresses\")).map((idx) => <li>{idx}</li>) );\n\n  const getContract = async e => {\n    e.preventDefault();\n\n    setCurrContract(searchContract);\n\n    RemixContract = new web3.eth.Contract(ContractABI, searchContract);\n\n    var participants = await RemixContract.methods\n      .getParticipantsAccn()\n      .call();\n\n    prize = await RemixContract.methods\n      .getPrize()\n      .call();\n\n    setParticipants(participants.map((idx) => <li>{idx}</li>));\n\n  };\n\n  const getParticipants = async e => {\n    var participants = await RemixContract.methods\n      .getParticipantsAccn()\n      .call();\n\n    setParticipants(participants.map((idx) => <li>{idx}</li>))\n  };\n\n  const register = async e => {\n    e.preventDefault();\n\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n\n    const gas = await RemixContract.methods.enter(enterEmail).estimateGas();\n    const result = await RemixContract.methods\n      .enter(enterEmail)  \n      .send({ from: account, gas });\n\n    console.log(result);\n  }\n\n  const createGiveaway = async e => {\n    e.preventDefault();\n    \n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n\n    const data = '0x' + '608060405234801561001057600080fd5b50604051610e3a380380610e3a83398101806040528101908080518201929190505050336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600290805190602001906100899291906100b3565b5060006001819055506001600360006101000a81548160ff02191690831515021790555050610158565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100f457805160ff1916838001178555610122565b82800160010185558215610122579182015b82811115610121578251825591602001919060010190610106565b5b50905061012f9190610133565b5090565b61015591905b80821115610151576000816000905550600101610139565b5090565b90565b610cd3806101676000396000f300608060405260043610610099576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806305b9415d1461009e57806322f3e2d4146100f557806335c1d349146101245780634d98cd06146101fd5780635d495aea1461028d5780635d6ecae6146102e45780638da5cb5b146103505780639d4ff8ad146103a7578063c34f6b0d14610410575b600080fd5b3480156100aa57600080fd5b506100b36104a0565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561010157600080fd5b5061010a6104ee565b604051808215151515815260200191505060405180910390f35b34801561013057600080fd5b5061014f60048036038101908080359060200190929190505050610505565b604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001828103825283818151815260200191508051906020019080838360005b838110156101c15780820151818401526020810190506101a6565b50505050905090810190601f1680156101ee5780820380516001836020036101000a031916815260200191505b50935050505060405180910390f35b34801561020957600080fd5b506102126105f0565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610252578082015181840152602081019050610237565b50505050905090810190601f16801561027f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561029957600080fd5b506102a26106b7565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156102f057600080fd5b506102f9610864565b6040518080602001828103825283818151815260200191508051906020019060200280838360005b8381101561033c578082015181840152602081019050610321565b505050509050019250505060405180910390f35b34801561035c57600080fd5b5061036561094d565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156103b357600080fd5b5061040e600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050610972565b005b34801561041c57600080fd5b50610425610a44565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561046557808201518184015260208101905061044a565b50505050905090810190601f1680156104925780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6000801515600360009054906101000a900460ff1615151415156104c357600080fd5b600560000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6000600360009054906101000a900460ff16905090565b60048181548110151561051457fe5b90600052602060002090600202016000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806001018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156105e65780601f106105bb576101008083540402835291602001916105e6565b820191906000526020600020905b8154815290600101906020018083116105c957829003601f168201915b5050505050905082565b606060001515600360009054906101000a900460ff16151514151561061457600080fd5b60056001018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156106ad5780601f10610682576101008083540402835291602001916106ad565b820191906000526020600020905b81548152906001019060200180831161069057829003601f168201915b5050505050905090565b6000806000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561071557600080fd5b60011515600360009054906101000a900460ff16151514151561073757600080fd5b600480549050610745610ae6565b81151561074e57fe5b0690506000600360006101000a81548160ff02191690831515021790555060048181548110151561077b57fe5b906000526020600020906002020160056000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060018201816001019080546001816001161561010002031660029004610819929190610b7b565b5090505060048181548110151561082c57fe5b906000526020600020906002020160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1691505090565b606080600060048054905060405190808252806020026020018201604052801561089d5781602001602082028038833980820191505090505b509150600090505b600154811015610945576004818154811015156108be57fe5b906000526020600020906002020160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1682828151811015156108fe57fe5b9060200190602002019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508060010190506108a5565b819250505090565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600460408051908101604052803373ffffffffffffffffffffffffffffffffffffffff168152602001838152509080600181540180825580915050906001820390600052602060002090600202016000909192909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001019080519060200190610a2d929190610c02565b505050506001806000828254019250508190555050565b606060028054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610adc5780601f10610ab157610100808354040283529160200191610adc565b820191906000526020600020905b815481529060010190602001808311610abf57829003601f168201915b5050505050905090565b6000444260405160200180838152602001828152602001925050506040516020818303038152906040526040518082805190602001908083835b602083101515610b455780518252602082019150602081019050602083039250610b20565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060019004905090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610bb45780548555610bf1565b82800160010185558215610bf157600052602060002091601f016020900482015b82811115610bf0578254825591600101919060010190610bd5565b5b509050610bfe9190610c82565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610c4357805160ff1916838001178555610c71565b82800160010185558215610c71579182015b82811115610c70578251825591602001919060010190610c55565b5b509050610c7e9190610c82565b5090565b610ca491905b80821115610ca0576000816000905550600101610c88565b5090565b905600a165627a7a723058203300d67cbe2c462139dbcfb7e3b22602bbfe587d7234154bc5e7e8e7c14367110029'\n\n    // Deploy\n    const Contract = new web3.eth.Contract(ContractABI);\n    Contract.deploy({data, arguments: [createPrize]})\n    .send({\n        from: account,\n        gas: 4700000\n    })\n    .on('error', function (error) { console.log('error: ', error) })\n    .then(function (newContract) {\n        const address = newContract.options.address;  \n\n        var alreadyStored = JSON.parse( localStorage.getItem(\"giveawayAdresses\") );\n        if ( alreadyStored ) {\n          alreadyStored.push(address);\n        } else {\n          alreadyStored = [];\n        }\n\n        localStorage.setItem(\"giveawayAdresses\", JSON.stringify(alreadyStored));\n        setLocalContracts(alreadyStored.map((idx) => <li>{idx}</li>));\n\n        console.log('address:', address)\n    });\n  }\n\n  const pickWinner = async e => {\n    e.preventDefault();\n  }\n\n  return (\n    <div className=\"App\" >\n      <header className=\"App-header\">\n\n        <div className=\"splitScreen\" >\n\n          {/* Partea in care afisam informatii despre contract */}\n          <div className=\"topPane\">\n\n            <h1>Cauta contract</h1>\n            <form onSubmit={getContract} >\n              <label>\n                <input\n                  placeHolder=\"adresa contract\"\n                  type=\"text\"\n                  name=\"message\"\n                  value={searchContract}\n                  onChange={e => setSearchContract(e.target.value)}\n                />\n              </label>\n              <input type=\"submit\" value=\"Cauta\" />\n            </form>\n            <div> {currContract}  <u> :premiul este: </u>  {prize} </div>\n\n          </div>\n\n\n\n          {/*partea in care aratam informatii despre contractul setat */}\n          <div className=\"secondTopPane\">\n\n            <h1>Informatii contract</h1>\n            <form onSubmit={register}>\n                <label>\n                  <input\n                    placeHolder=\"email\"\n                    className=\"smallBox\"\n                    type=\"text\"\n                    name=\"enterEmail\"\n                    value={enterEmail}\n                    onChange={e => setEnterEmail(e.target.value)}\n                  />\n                </label>\n                <input type=\"submit\" value=\"Inscriere\" className=\"smallBox\"/>\n              </form>\n\n              <button onClick={getParticipants} type=\"button\"> Arata participantii </button>\n              <button onClick={pickWinner} type=\"button\" >Alege castigator</button>\n              <ul> {participant} </ul>\n\n          </div>\n\n          {/*partea in care apare optiunea de a crea un nou contract*/}\n          <div className=\"bottomPane\">\n            \n            <h1>Creaza giveaway</h1>\n            <form onSubmit={createGiveaway}>\n                <label>\n                  <input\n                    placeHolder=\"premiu ...\"\n                    type=\"text\"\n                    name=\"message\"\n                    value={createPrize}\n                    onChange={e => setCreatePrize(e.target.value)}\n                  />\n                </label>\n                <input type=\"submit\" value=\"Creaza\" />\n              </form>\n\n              {localContracts}\n\n          </div>\n\n\n        </div>\n      </header>\n    </div>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}